<pim-plugin key="SETTINGS_HEADER_TOKENS_PREPEND" uiblocks="uiblocks"></pim-plugin>
<div class="row header header_small" data-block="api">
    <div class="col-sm-6 col-sm-offset-1">
        <pim-plugin key="SETTINGS_TITLE_TOKENS_PREPEND" uiblocks="uiblocks"></pim-plugin>
        <h3>API-Zugriff</h3>
        <pim-plugin key="SETTINGS_TITLE_TOKENS_PREPEND" uiblocks="uiblocks"></pim-plugin>
    </div>
</div>
<div class="row" data-block="api-token">
    <pim-plugin key="SETTINGS_BODY_TOKENS_APPEND" uiblocks="uiblocks"></pim-plugin>
    <div class="col-sm-6 col-sm-offset-1">
        <p><b>Neuen API-Token erstellen</b></p>
        <form class="form-horizontal">
            <div class="form-group">
                <label for="referrer" class="col-sm-3 control-label optional">Referrer</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" id="referrer" ng-keyup="vm.checkTokenSubmittable()" placeholder="" ng-model="vm.tokenReferrer">
                </div>
            </div>
            <div class="form-group">
                <label for="tokenUser" class="col-sm-3 control-label optional">Benutzer</label>
                <div class="col-sm-9 ">
                    <select ng-options="option.id as option.name for option in vm.users" class="form-control" id="tokenUser" name="tokenUser"  ng-model="vm.tokenUser">

                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="token" class="col-sm-3 control-label optional">APPCMS-TOKEN</label>
                <div class="col-sm-9">
                    <div class="input-group">
                        <input type="text" class="form-control" id="token" placeholder="" ng-keyup="vm.checkTokenSubmittable()" ng-model="vm.token">
                        <div class="input-group-addon" ng-click="vm.generateToken()">generieren</div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-9  col-lg-offset-3">
                    <button class="btn btn-success btn-sm" ng-click="vm.addToken()" ng-disabled="vm.buttonsDisabled || vm.tokenSubmitDisabled">API-Zugriff erstellen</button>
                </div>
            </div>
        </form>
        <p><b>Bestehende API-Tokens</b></p>
        <p ng-hide="vm.tokens.length"><i>Derzeit sind noch keine API-Tokens im System hinterlegt.</i></p>
        <div class="form-horizontal row-token" ng-repeat="token in vm.tokens">
            <div class="row">
                <div class="col-sm-3">Referrer</div>
                <div class="col-sm-9">
                    {{token.referrer}}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">Benutzer</div>
                <div class="col-sm-9">
                    {{token.user.alias}}<i ng-if="!token.user.active">(gesperrt)</i>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">APPCMS-TOKEN</div>
                <div class="col-sm-8">
                    {{token.token}}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <button class="btn btn-danger btn-sm" ng-click="vm.deleteToken($index)" ng-disabled="vm.buttonsDisabled">Token l√∂schen</button>
                </div>
            </div>
        </div>
    </div>
    <pim-plugin key="SETTINGS_BODY_TOKENS_APPEND" uiblocks="uiblocks"></pim-plugin>
</div>
